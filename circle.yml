version: 2.1
orbs:
  cypress: cypress-io/cypress@1
workflows:
  build:
    jobs:
      - cypress/install:
          pre-steps:
            - checkout
            - run:
              name: "Pull Submodules"
              command: |
                git redcap-docker-compose init
                git redcap-docker-compose update --remote
            - run:
                name: Build the REDCap image
                command: |
                    cd redcap-docker-compose/rdc
                    set -x
                    docker-compose up -d
      - cypress/run