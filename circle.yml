version: 2.1
orbs:
  cypress: cypress-io/cypress@1.7.0
workflows:
  build:
    jobs:
      redcap:
        machine: true
        steps:
          - checkout
          - run:
              name: Build the REDCap image
              command: |
                  cd rdc
                  set -x
                  docker-compose up -d
      - cypress/install
      - cypress/run:
          wait-on: 'http://localhost:80'