  build:
    jobs:
      - cypress/install:
        - checkout
        - run:
          name: "Pull REDCap Docker"
          command: |
            git redcap-docker-compose init
            git redcap-docker-compose update --remote
        - run:
          name: Build the REDCap image
          command: |
              cd redap-docker-compose
              cd rdc
              set -x
              docker-compose up -d
      - cypress/run:
          # make sure app has been installed and built
          # before running tests across multiple machines
          # this avoids installing same dependencies 10 times
          requires:
            - cypress/install
          group: 'all tests' # name this group "all tests" on the dashboard
          start: 'npm start' # start server before running tests